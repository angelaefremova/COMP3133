<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="../101311327_lab_test1_chat_app/css/style.css"
      type="text/css"
    />
<style>
  #form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: absolute; bottom: 0% ; width: 100%; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); }
      #input { border: none; padding: 0 1rem; flex-grow: 1; border-radius: 2rem; margin: 0.25rem; }
      #input:focus { outline: none; }
      #form > button { background: #333; border: none; padding: 0 1rem; margin: 0.25rem; border-radius: 3px; outline: none; color: #fff; }

  #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages > li { padding: 0.5rem 1rem; }
      #messages > li:nth-child(odd) { background: #bdbdbd; }
</style>
    <title>ChatterBox</title>
  </head>
  <body>
    <h2 style="text-align: center">ChatterBox</h2>
    <h2 style="text-align: right; margin-right: 3%">
      <a href="/logout">Logout</a>
    </h2>
    <section style="background-color: #eee">
      <div class="container py-5">
        <div class="row">
          <div class="col-md-6 col-lg-5 col-xl-4 mb-4 mb-md-0">
            <h5 class="font-weight-bold mb-3 text-center text-lg-start">
              Rooms
            </h5>

            <div class="card">
              <div class="card-body">
                <ul class="list-unstyled mb-0">
                  <li class="p-2 border-bottom" style="background-color: #eee">
                    <a href="#!" class="d-flex justify-content-between">
                      <div class="d-flex flex-row">
                        <img
                          src="https://img.freepik.com/premium-vector/newspaper-vector-illustration-logo-icon-clipart_7688-575.jpg?w=2000"
                          alt="avatar"
                          class="
                            rounded-circle
                            d-flex
                            align-self-center
                            me-3
                            shadow-1-strong
                          "
                          width="60"
                        />
                        <div class="pt-1">
                          <p class="fw-bold mb-0">News</p>
                          <p class="small text-muted">Join Room</p>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li class="p-2 border-bottom">
                    <a href="#!" class="d-flex justify-content-between">
                      <div class="d-flex flex-row">
                        <img
                          src="https://hive.rochesterregional.org/-/media/health-hive/icons/covid_blue01.png"
                          alt="avatar"
                          class="
                            rounded-circle
                            d-flex
                            align-self-center
                            me-3
                            shadow-1-strong
                          "
                          width="60"
                        />
                        <div class="pt-1">
                          <p class="fw-bold mb-0">Covid 19</p>
                          <p class="small text-muted">Join Room</p>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li class="p-2 border-bottom">
                    <a href="#!" class="d-flex justify-content-between">
                      <div class="d-flex flex-row">
                        <img
                          src="https://images.g2crowd.com/uploads/product/image/large_detail/large_detail_f0b606abb6d19089febc9faeeba5bc05/nodejs-development-services.png"
                          alt="avatar"
                          class="
                            rounded-circle
                            d-flex
                            align-self-center
                            me-3
                            shadow-1-strong
                          "
                          width="60"
                        />
                        <div class="pt-1">
                          <p class="fw-bold mb-0">NodeJS</p>
                          <p class="small text-muted">Join Room</p>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li class="p-2 border-bottom">
                    <a href="#!" class="d-flex justify-content-between">
                      <div class="d-flex flex-row">
                        <img
                          src="https://devopedia.org/images/article/292/9224.1603527296.jpg"
                          alt="avatar"
                          class="
                            rounded-circle
                            d-flex
                            align-self-center
                            me-3
                            shadow-1-strong
                          "
                          width="60"
                        />
                        <div class="pt-1">
                          <p class="fw-bold mb-0">COMP3133</p>
                          <p class="small text-muted">Join Room</p>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li class="p-2 border-bottom">
                    <a href="#!" class="d-flex justify-content-between">
                      <div class="d-flex flex-row">
                        <img
                          src="https://i.pcmag.com/imagery/reviews/05cItXL96l4LE9n02WfDR0h-5..v1582751026.png"
                          alt="avatar"
                          class="
                            rounded-circle
                            d-flex
                            align-self-center
                            me-3
                            shadow-1-strong
                          "
                          width="60"
                        />
                        <div class="pt-1">
                          <p class="fw-bold mb-0">Netflix</p>
                          <p class="small text-muted">Join Room</p>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li class="p-2 border-bottom">
                    <a href="#!" class="d-flex justify-content-between">
                      <div class="d-flex flex-row">
                        <img
                          src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-5.webp"
                          alt="avatar"
                          class="
                            rounded-circle
                            d-flex
                            align-self-center
                            me-3
                            shadow-1-strong
                          "
                          width="60"
                        />
                        <div class="pt-1">
                          <p class="fw-bold mb-0">Sarah</p>
                          <p class="small text-muted">Message</p>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li class="p-2">
                    <a href="#!" class="d-flex justify-content-between">
                      <div class="d-flex flex-row">
                        <img
                          src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp"
                          alt="avatar"
                          class="
                            rounded-circle
                            d-flex
                            align-self-center
                            me-3
                            shadow-1-strong
                          "
                          width="60"
                        />
                        <div class="pt-1">
                          <p class="fw-bold mb-0">Connor</p>
                          <p class="small text-muted">Message</p>
                        </div>
                      </div>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-md-6 col-lg-7 col-xl-8" style="position: relative;">
            <ul id="messages"></ul>
            <div>
            <form id="form" action="">
              <input 
                id="input"
                autocomplete="off"
              />
              <button >Send</button>
            </div>
            </form>
          </div>
        </div>
      </div>
    </section>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();

      var messages = document.getElementById("messages");
      var form = document.getElementById("form");
      var input = document.getElementById("input");

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        if (input.value) {
          socket.emit("chat message", input.value);
          input.value = "";
        }
      });

      socket.on("chat message", function (msg) {
        var item = document.createElement("li");
        item.textContent = msg;
        messages.appendChild(item);
        window.scrollTo(0, document.body.scrollHeight);
      });
    </script>
  </body>
</html>
